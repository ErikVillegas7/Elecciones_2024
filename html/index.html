<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elecciones</title>
</head>
<style>
    @import url('https://fonts.googleapis.com/css?family=Exo:400,700');
    

    body {
        font-family: 'Overpass', sans-serif;
        font-weight: normal;
        font-size: 100%;
        color: #1b262c;
        margin: 0;
        background-color: #5f6769;
    }

    #container {
        display: flex;
        align-items: center;
        justify-content: center;

        margin: 0;
        padding: 0;
        min-width: 100vw;
        min-height: 100vh;
        width: 100%;
        height: 100%;
        background-color: #0074b5;
        background-position: center;
        background-size: cover;
    }

    #container-center {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: row;

        min-width: 380px;
        max-width: 900px;
        width: 90%;




        border-radius: 10px 10px 10px 10px;
        -moz-border-radius: 10px 10px 10px 10px;
        -webkit-border-radius: 10px 10px 10px 10px;


        padding: 30px;
        box-sizing: border-box;
    }

    #login {

        width: 100%;
        max-width: 620px;
        min-width: 320px;
        padding: 30px 30px 50px 30px;
        background-color: #22508d;

        -webkit-box-shadow: 0px 0px 5px 5px rgba(0, 0, 0, 0.15);
        -moz-box-shadow: 0px 0px 5px 5px rgba(0, 0, 0, 0.15);
        box-shadow: 0px 0px 5px 5px rgba(0, 0, 0, 0.15);

        border-radius: 3px 3px 3px 3px;
        -moz-border-radius: 3px 3px 3px 3px;
        -webkit-border-radius: 3px 3px 3px 3px;

        box-sizing: border-box;

        opacity: 1;
        filter: alpha(opacity=1);
    }

    #login label {
        display: block;
        font-family: 'Overpass', sans-serif;
        font-size: 120%;
        color: #ffffff;

        margin-top: 15px;
    }

    #login input {
        font-family: 'Overpass', sans-serif;
        font-size: 110%;
        color: #000000;

        display: block;
        width: 100%;
        height: 40px;

        margin-bottom: 10px;
        padding: 5px 5px 5px 10px;

        box-sizing: border-box;

        border: none;
        border-radius: 3px 3px 3px 3px;
        -moz-border-radius: 3px 3px 3px 3px;
        -webkit-border-radius: 3px 3px 3px 3px;
    }

    #login input::placeholder {
        font-family: 'Overpass', sans-serif;
        color: #747474;
        font-size: 14px;
    }

    form h2 {
        text-align: center;
        color: white;
    }

    button {
        background-color: #092163;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 3px;
        cursor: pointer;
    }

    button:hover {
        background-color: #5f97ff;
    }

    #error-message {
        color: red;
        font-weight: bold;
    }
</style>

<body>

</body>
<main>
    <div id="container">
        <div id="container-center">
            <div id="login">
                <form id="login-form" action="validar.php" method="post">
                    <h2>Vamos a Votar</h2>
                    <div>
                        <label for="Userid">Documento</label>
                        <input type="text" name="Userdni" id="input-id" placeholder="DNI">
                    </div>
                    <div>
                        <label for="User-email">Correo</label>
                        <input type="text" name="User-email" id="input-email" placeholder="nombre@escuelasproa.edu.ar">
                    </div>
                    <div>
                        <label for="Username">Name</label>
                        <input type="text" name="Username" id="Username" placeholder="name">
                    </div>
                    <div>
                        <label for="User-surname">Apellido</label>
                        <input type="text" name="User-surname" id="input-surname" placeholder="Apellido">
                    </div>
                    <button type="submit" >Acceder</button>
                </form>
                <p id="error-message"></p>
            </div>
        </div>
    </div>
</main>
<footer>

</footer>
<script>
    const loginForm = document.getElementById('login-form');
    const dniInput = document.getElementById('dni');
    const errorMessage = document.getElementById('error-message');

    loginForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const dni = dniInput.value.trim();

        // Validate DNI format (basic check)
        if (dni.length !== 8 || !/^[0-9]{8}$/.test(dni)) {
            errorMessage.textContent = 'DNI inválido. Debe tener 8 dígitos.';
            return;
        }

        // Send DNI to server for validation (using AJAX or Fetch API)
        fetch('/validate-dni', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ dni: dni })
        })
            .then(response => response.json())
            .then(data => {
                if (data.valid) {
                    // DNI is valid, redirect to voting page
                    window.location.href = '/voting-page';
                } else {
                    errorMessage.textContent = data.error;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                errorMessage.textContent = 'Error al validar DNI. Inténtelo de nuevo.';
            });
    });
</script>
</body>

</html>